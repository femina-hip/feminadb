-# Required variables:
-# - path, the destination URL
-# - num_results, the number of results
-# "params":
-# - q, the search query
-# - all (optional) will get passed through
= form_tag path, :method => :get, :class => 'search' do
  %table.search
    %tr
      %td
        %label{:for => 'customer_search_q'} Search:
      %td.stretch
        - if params[:all]
          = hidden_field_tag(:all, params[:all])
        = text_field_tag(:q, params[:q], :id => 'customer_search_q')
      %td
        = submit_tag 'Search'
        = submit_tag('Show All Customers', :id => 'customer_search_reset')
  %table.refine-search
    %tr
      %td
        %b= num_results
        results.
      %td
        %label
          Search for
          %select{:id => 'customer_search_refine_term', :name => 'refine_term'}
            %option{:value => ''} (Anything)
            %option{:value => 'region'} Region
            %option{:value => 'district'} District
            %option{:value => 'category'} Category
            %option{:value => 'type'} Type
            %option{:value => 'delivery_method'} Delivery Method
            %option{:value => 'club'} Has club? ('yes' or 'no')
            %option{:value => 'tag'} Tag
        %label{:for => 'customer_search_refine_q'}
          containing
      %td.stretch
        = text_field_tag('customer_search_refine_q')
      %td
        = submit_tag('Refine', :id => 'customer_search_refine_submit')
