-# Required variables: "lines", the lines; "show_num_copies": boolean
%table{:class => 'special-order-lines'}
  %thead.title
    %tr
      %th{:colspan => (show_num_copies ? 4 : 3)}
        Requested Copies
  %thead
    %tr
      %th Issue
      %th Requested
      %th In Stock Now
      - if show_num_copies
        %th Granted
  %tbody
    - lines.each do |line|
      - t = cycle('odd', 'even')
      - if line.denied?
        - t += ' denied'
      %tr{:class => t}
        %td= line.issue.full_name
        %td.num-copies-requested= line.num_copies_requested
        %td.num-copies-in-stock= line.issue.num_copies_in_stock
        - if show_num_copies
          %td.num-copies-granted= line.num_copies
