-# Required variables: @customer

%table.customer-special-order-lines
  %thead.title
    %tr
      %th{:colspan => 9}= "Special Orders (#{@customer.special_order_lines.count})"
  %thead
    %tr
      %th Publication
      %th #
      %th Issue
      %th # Req
      %th Qty
      %th User
      %th For Date
      %th Status
      %th
  %tbody
    - @customer.special_order_lines.each do |line|
      %tr{:class => cycle('odd', 'even')}
        %td{:class => 'publication'}= line.issue.publication.name
        %td{:class => 'issue_number'}= line.issue.issue_number
        %td{:class => 'issue_name'}= line.issue.name
        %td{:class => 'num_copies_requested'}= line.num_copies_requested
        %td{:class => 'num_copies'}= line.num_copies
        %td{:class => 'user'}= render_user(line.special_order.requested_by_user)
        %td{:class => 'order_date'}= line.special_order.requested_for_date
        %td{:class => 'status'}= line.special_order.state_string
        %td{:class => 'actions'}= link_to('Show Order', line.special_order)
    %tr
      %td{:colspan => 9, :class => 'add'}
        = link_to('Request New Special Order for this Customer', new_special_order_path(:customer_id => @customer))
